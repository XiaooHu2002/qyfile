<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è§†é¢‘æ’­æ”¾å™¨</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="navigation">
                <span class="home-icon">ğŸ </span>
                <a href="index.html">è¿”å›é¦–é¡µ</a>
            </div>
        </div>
        <div id="video-container" class="video-container">
            <video id="player" playsinline controls>

            </video>
            <!-- æ–°å¢ä¸‹è½½æŒ‰é’® -->
            <div id="download-container">
                <a id="download-btn" class="download-button" href="#" download>ä¸‹è½½è§†é¢‘</a>
            </div>
        </div>
        <footer>åƒå±¹æ–‡ä»¶åˆ—è¡¨ | <a href="https://qianyios.top">ä¸¥åƒå±¹</a></footer>
    </div>
    <script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>
    <script>
        const player = new Plyr('#player', {
            i18n: {
                restart: 'é‡æ–°å¼€å§‹',
                rewind: 'å¿«é€€ {seektime}s',
                play: 'æ’­æ”¾',
                pause: 'æš‚åœ',
                fastForward: 'å¿«è¿› {seektime}s',
                seek: 'æŸ¥æ‰¾',
                seekLabel: '{currentTime} of {duration}',
                played: 'å·²æ’­æ”¾',
                buffered: 'å·²ç¼“å†²',
                currentTime: 'å½“å‰æ—¶é—´',
                duration: 'æ€»æ—¶é•¿',
                volume: 'éŸ³é‡',
                mute: 'é™éŸ³',
                unmute: 'å–æ¶ˆé™éŸ³',
                enableCaptions: 'å¼€å¯å­—å¹•',
                disableCaptions: 'å…³é—­å­—å¹•',
                download: 'ä¸‹è½½',
                enterFullscreen: 'è¿›å…¥å…¨å±',
                exitFullscreen: 'é€€å‡ºå…¨å±',
                frameTitle: 'åµŒå…¥çš„ {title} æ’­æ”¾å™¨',
                captions: 'å­—å¹•',
                settings: 'è®¾ç½®',
                pip: 'ç”»ä¸­ç”»',
                menuBack: 'è¿”å› {title}',
                speed: 'é€Ÿåº¦',
                normal: 'æ­£å¸¸',
                quality: 'è´¨é‡',
                loop: 'å¾ªç¯'
            }
        });
    </script>    
    <script>        
        // ä¿®æ”¹ä¸ºä½¿ç”¨å‚æ•° "path" å¹¶è§£ç 
        const urlParams = new URLSearchParams(window.location.search);
        const filePath = urlParams.get('path');
    
        if (filePath) {
            const videoSource = `/files/${decodeURIComponent(filePath)}`; // ä½¿ç”¨åŠ¨æ€è·¯å¾„
            const videoElement = document.getElementById('player');
            videoElement.src = videoSource;
            
            player.source = {
                type: 'video',
                sources: [
                    { src: videoSource, type: 'video/mp4' }
                ]
            };
    
            // è®¾ç½®ä¸‹è½½æŒ‰é’®é“¾æ¥
            const downloadBtn = document.getElementById('download-btn');
            if (downloadBtn) {
                downloadBtn.href = videoSource;
            }
        } else {
            alert('æœªæŒ‡å®šè§†é¢‘æ–‡ä»¶è·¯å¾„ï¼Œè¯·ä»æ–‡ä»¶åˆ—è¡¨ä¸­é€‰æ‹©è§†é¢‘æ’­æ”¾ï¼');
        }
    </script>
</body>
</html>
