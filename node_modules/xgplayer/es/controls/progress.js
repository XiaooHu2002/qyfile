!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.progress=t():(e.xgplayer=e.xgplayer||{},e.xgplayer.PlayerControls=e.xgplayer.PlayerControls||{},e.xgplayer.PlayerControls.progress=t())}(window,(function(){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=5)}([function(e,t,r){var o=r(1);"string"==typeof o&&(o=[[e.i,o,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};r(3)(o,n);o.locals&&(e.exports=o.locals)},function(e,t,r){(e.exports=r(2)(!1)).push([e.i,".xgplayer-skin-default .xgplayer-progress{display:block;position:absolute;height:20px;line-height:20px;left:12px;right:12px;outline:none;top:-15px;z-index:35}.xgplayer-skin-default .xgplayer-progress-outer{background:hsla(0,0%,100%,.3);display:block;height:3px;line-height:3px;margin-top:8.5px;width:100%;position:relative;cursor:pointer}.xgplayer-skin-default .xgplayer-progress-cache,.xgplayer-skin-default .xgplayer-progress-played{display:block;height:100%;line-height:1;position:absolute;left:0;top:0}.xgplayer-skin-default .xgplayer-progress-cache{width:0;background:hsla(0,0%,100%,.5)}.xgplayer-skin-default .xgplayer-progress-played{display:block;width:0;background-image:linear-gradient(-90deg,#fa1f41,#e31106);border-radius:0 1.5px 1.5px 0}.xgplayer-skin-default .xgplayer-progress-btn{display:none;position:absolute;left:0;top:-5px;width:13px;height:13px;border-radius:30px;background:#fff;box-shadow:0 0 2px 0 rgba(0,0,0,.26);left:100%;-webkit-transform:translate(-50%);-ms-transform:translate(-50%);transform:translate(-50%);z-index:36}.xgplayer-skin-default .xgplayer-progress-point{position:absolute}.xgplayer-skin-default .xgplayer-progress-point.xgplayer-tips{margin-left:0;top:-25px;display:none;z-index:100}.xgplayer-skin-default .xgplayer-progress-dot{display:inline-block;position:absolute;height:3px;width:5px;top:0;background:#fff;border-radius:6px;z-index:16}.xgplayer-skin-default .xgplayer-progress-dot .xgplayer-progress-tip{position:absolute;bottom:200%;right:50%;-webkit-transform:translateX(50%);-ms-transform:translateX(50%);transform:translateX(50%);height:auto;line-height:30px;width:auto;background:rgba(0,0,0,.3);border-radius:6px;border:1px solid rgba(0,0,0,.8);cursor:default;white-space:nowrap;display:none}.xgplayer-skin-default .xgplayer-progress-dot-show .xgplayer-progress-tip{display:block}.xgplayer-skin-default .xgplayer-progress-thumbnail{position:absolute;-moz-box-sizing:border-box;box-sizing:border-box}.xgplayer-skin-default .xgplayer-progress-thumbnail.xgplayer-tips{margin-left:0;display:none;z-index:99}.xgplayer-skin-default .xgplayer-coverpreview{position:absolute;width:100%;height:100%;top:0;left:0;display:none}.xgplayer-skin-default .xgplayer-coverpreview .xgplayer-coverpreview-outer{position:absolute;display:block;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.xgplayer-skin-default .xgplayer-coverpreview .xgplayer-coverpreview-outer .xgplayer-coverpreview-thumbnail{display:block}.xgplayer-skin-default .xgplayer-coverpreview .xgplayer-coverpreview-outer .xgplayer-coverpreview-point{display:block;text-align:center;font-family:PingFangSC-Regular;font-size:11px;color:#ccc;padding:2px 4px}.xgplayer-skin-default .xgplayer-coverpreview .xgplayer-coverpreview-outer .xgplayer-coverpreview-point span{color:#fff}.xgplayer-skin-default .xgplayer-progress:focus .xgplayer-progress-outer,.xgplayer-skin-default .xgplayer-progress:hover .xgplayer-progress-outer{height:6px;margin-top:7px}.xgplayer-skin-default .xgplayer-progress:focus .xgplayer-progress-dot,.xgplayer-skin-default .xgplayer-progress:hover .xgplayer-progress-dot{height:6px}.xgplayer-skin-default .xgplayer-progress:focus .xgplayer-progress-btn,.xgplayer-skin-default .xgplayer-progress:hover .xgplayer-progress-btn{display:block;top:-3px}.xgplayer-skin-default.xgplayer-definition-active .xgplayer-progress,.xgplayer-skin-default.xgplayer-playbackrate-active .xgplayer-progress,.xgplayer-skin-default.xgplayer-texttrack-active .xgplayer-progress,.xgplayer-skin-default.xgplayer-volume-active .xgplayer-progress{z-index:15}.xgplayer-skin-default.xgplayer-mobile .xgplayer-progress-btn{display:block!important}.xgplayer-skin-default.xgplayer-mobile .xgplayer-progress:focus .xgplayer-progress-outer,.xgplayer-skin-default.xgplayer-mobile .xgplayer-progress:hover .xgplayer-progress-outer{height:3px!important;margin-top:8.5px!important}.xgplayer-skin-default.xgplayer-mobile .xgplayer-progress:focus .xgplayer-progress-btn,.xgplayer-skin-default.xgplayer-mobile .xgplayer-progress:hover .xgplayer-progress-btn{display:block!important;top:-5px!important}",""])},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",o=e[3];if(!o)return r;if(t&&"function"==typeof btoa){var n=(s=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),i=o.sources.map((function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"}));return[r].concat(i).concat([n]).join("\n")}var s;return[r].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r})).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},n=0;n<this.length;n++){var i=this[n][0];"number"==typeof i&&(o[i]=!0)}for(n=0;n<e.length;n++){var s=e[n];"number"==typeof s[0]&&o[s[0]]||(r&&!s[2]?s[2]=r:r&&(s[2]="("+s[2]+") and ("+r+")"),t.push(s))}},t}},function(e,t,r){var o,n,i={},s=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===n&&(n=o.apply(this,arguments)),n}),a=function(e){return document.querySelector(e)},l=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var r=a.call(this,e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}}(),p=null,c=0,u=[],d=r(4);function g(e,t){for(var r=0;r<e.length;r++){var o=e[r],n=i[o.id];if(n){n.refs++;for(var s=0;s<n.parts.length;s++)n.parts[s](o.parts[s]);for(;s<o.parts.length;s++)n.parts.push(v(o.parts[s],t))}else{var a=[];for(s=0;s<o.parts.length;s++)a.push(v(o.parts[s],t));i[o.id]={id:o.id,refs:1,parts:a}}}}function f(e,t){for(var r=[],o={},n=0;n<e.length;n++){var i=e[n],s=t.base?i[0]+t.base:i[0],a={css:i[1],media:i[2],sourceMap:i[3]};o[s]?o[s].parts.push(a):r.push(o[s]={id:s,parts:[a]})}return r}function y(e,t){var r=l(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=u[u.length-1];if("top"===e.insertAt)o?o.nextSibling?r.insertBefore(t,o.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),u.push(t);else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var n=l(e.insertInto+" "+e.insertAt.before);r.insertBefore(t,n)}}function x(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function h(e){var t=document.createElement("style");return e.attrs.type="text/css",m(t,e.attrs),y(e,t),t}function m(e,t){Object.keys(t).forEach((function(r){e.setAttribute(r,t[r])}))}function v(e,t){var r,o,n,i;if(t.transform&&e.css){if(!(i=t.transform(e.css)))return function(){};e.css=i}if(t.singleton){var s=c++;r=p||(p=h(t)),o=k.bind(null,r,s,!1),n=k.bind(null,r,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",m(t,e.attrs),y(e,t),t}(t),o=L.bind(null,r,t),n=function(){x(r),r.href&&URL.revokeObjectURL(r.href)}):(r=h(t),o=E.bind(null,r),n=function(){x(r)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else n()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=f(e,t);return g(r,t),function(e){for(var o=[],n=0;n<r.length;n++){var s=r[n];(a=i[s.id]).refs--,o.push(a)}e&&g(f(e,t),t);for(n=0;n<o.length;n++){var a;if(0===(a=o[n]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete i[a.id]}}}};var b,w=(b=[],function(e,t){return b[e]=t,b.filter(Boolean).join("\n")});function k(e,t,r,o){var n=r?"":o.css;if(e.styleSheet)e.styleSheet.cssText=w(t,n);else{var i=document.createTextNode(n),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function E(e,t){var r=t.css,o=t.media;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function L(e,t,r){var o=r.css,n=r.sourceMap,i=void 0===t.convertToAbsoluteUrls&&n;(t.convertToAbsoluteUrls||i)&&(o=d(o)),n&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var s=new Blob([o],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,o=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var n,i=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(n=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")}))}},function(e,t,r){"use strict";r.r(t);function o(e="div",t="",r={},o=""){let n=document.createElement(e);return n.className=o,n.innerHTML=t,Object.keys(r).forEach(t=>{let o=t,i=r[t];"video"===e||"audio"===e?i&&n.setAttribute(o,i):n.setAttribute(o,i)}),n}function n(e,t){return!!e&&(e.classList?Array.prototype.some.call(e.classList,e=>e===t):!!e.className&&!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)")))}function i(e,t){e&&(e.classList?t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(t=>{t&&e.classList.add(t)}):n(e,t)||(e.className+=" "+t))}function s(e,t){e&&(e.classList?t.split(/\s+/g).forEach(t=>{e.classList.remove(t)}):n(e,t)&&t.split(/\s+/g).forEach(t=>{let r=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(r," ")}))}function a(e,t){e&&t.split(/\s+/g).forEach(t=>{n(e,t)?s(e,t):i(e,t)})}function l(e=document,t){let r;try{r=e.querySelector(t)}catch(o){0===t.indexOf("#")&&(r=e.getElementById(t.slice(1)))}return r}function p(e,t,r){let o=String(r),n=t>>0,i=Math.ceil(n/o.length),s=[],a=String(e);for(;i--;)s.push(o);return s.join("").substring(0,n-a.length)+a}function c(e){if(window.isNaN(e))return"";let t=p(Math.floor(e/3600),2,0),r=p(Math.floor((e-3600*t)/60),2,0),o=p(Math.floor(e-3600*t-60*r),2,0);return("00"===t?[r,o]:[t,r,o]).join(":")}function u(e){if(e.touches){let t=e.touches[0]||e.changedTouches[0];e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop}e._target=e.target||e.srcElement}function d(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]}let g={};Object.defineProperty(g,"device",{get:function(){return g.os.isPc?"pc":"mobile"}}),Object.defineProperty(g,"browser",{get:function(){let e=navigator.userAgent.toLowerCase(),t={ie:/rv:([\d.]+)\) like gecko/,firfox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(t).filter(r=>t[r].test(e)))[0]||""}}),Object.defineProperty(g,"os",{get:function(){let e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),r=/(?:SymbianOS)/.test(e)||t,o=/(?:Android)/.test(e),n=/(?:Firefox)/.test(e),i=/(?:iPad|PlayBook)/.test(e)||o&&!/(?:Mobile)/.test(e)||n&&/(?:Tablet)/.test(e),s=/(?:iPhone)/.test(e)&&!i;return{isTablet:i,isPhone:s,isAndroid:o,isPc:!(s||o||r||i),isSymbian:r,isWindowsPhone:t,isFireFox:n}}});var f=g;r(0);const y=e=>n(e.root,"xgplayer-rotate-fullscreen");var x={name:"s_progress",method:function(){let e,t=this,r=o("xg-progress",'<xg-outer class="xgplayer-progress-outer">\n                                                   <xg-cache class="xgplayer-progress-cache"></xg-cache>\n                                                   <xg-played class="xgplayer-progress-played">\n                                                     <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>\n                                                     <xg-point class="xgplayer-progress-point xgplayer-tips"></xg-point>\n                                                     <xg-thumbnail class="xgplayer-progress-thumbnail xgplayer-tips"></xg-thumbnail>\n                                                   </xg-played>\n                                                 </xg-outer>',{tabindex:1},"xgplayer-progress");t.controls.appendChild(r);let p=r.querySelector(".xgplayer-progress-played"),g=r.querySelector(".xgplayer-progress-outer"),x=r.querySelector(".xgplayer-progress-cache"),h=r.querySelector(".xgplayer-progress-point"),m=r.querySelector(".xgplayer-progress-thumbnail");function v(e,o){e.addEventListener("mouseenter",(function(t){o&&(i(e,"xgplayer-progress-dot-show"),i(r,"xgplayer-progress-dot-active"))})),e.addEventListener("mouseleave",(function(t){o&&(s(e,"xgplayer-progress-dot-show"),s(r,"xgplayer-progress-dot-active"))})),e.addEventListener("touchend",(function(i){i.stopPropagation(),o&&(n(e,"xgplayer-progress-dot-show")||Object.keys(t.dotArr).forEach((function(e){t.dotArr[e]&&s(t.dotArr[e],"xgplayer-progress-dot-show")})),a(e,"xgplayer-progress-dot-show"),a(r,"xgplayer-progress-dot-active"))}))}function b(){t.config.progressDot&&"Array"===d(t.config.progressDot)&&t.config.progressDot.forEach(e=>{if(e.time>=0&&e.time<=t.duration){let r=o("xg-progress-dot",e.text?`<span class="xgplayer-progress-tip">${e.text}</span>`:"",{},"xgplayer-progress-dot");if(r.style.left=e.time/t.duration*100+"%",e.duration>=0&&(r.style.width=Math.min(e.duration,t.duration-e.time)/t.duration*100+"%"),e.style)for(let t in e.style)r.style[t]=e.style[t];g.appendChild(r),t.dotArr[e.time]=r,v(r,e.text)}})}t.dotArr={},t.once("canplay",b),t.addProgressDot=function(e,r,n,i){if(!t.dotArr[e]&&e>=0&&e<=t.duration){let s=o("xg-progress-dot",r?`<span class="xgplayer-progress-tip">${r}</span>`:"",{},"xgplayer-progress-dot");if(s.style.left=e/t.duration*100+"%",n>=0&&(s.style.width=Math.min(n,t.duration-e)/t.duration*100+"%"),i)for(let e in i)s.style[e]=i[e];g.appendChild(s),t.dotArr[e]=s,v(s,r)}},t.removeProgressDot=function(e){if(e>=0&&e<=t.duration&&t.dotArr[e]){let r=t.dotArr[e];r.parentNode.removeChild(r),r=null,t.dotArr[e]=null}},t.removeAllProgressDot=function(){Object.keys(t.dotArr).forEach((function(e){if(t.dotArr[e]){let r=t.dotArr[e];r.parentNode.removeChild(r),r=null,t.dotArr[e]=null}}))};let w,k,E,L=0,S=0,C=0,P=0,A=0,M=0,T=[],j=function(){t.config.thumbnail&&(t.config.thumbnail.isShowCoverPreview&&!w&&(p.removeChild(m),w=o("xg-coverpreview",'<xg-outer class="xgplayer-coverpreview-outer">\n            <xg-thumbnail class="xgplayer-coverpreview-thumbnail"></xg-thumbnail>\n            <xg-point class="xgplayer-coverpreview-point"></xg-point>\n          </xg-outer>',{tabindex:1},"xgplayer-coverpreview"),E=w.querySelector(".xgplayer-coverpreview-outer"),k=w.querySelector(".xgplayer-coverpreview-point"),m=w.querySelector(".xgplayer-coverpreview-thumbnail"),t.root.appendChild(w)),L=t.config.thumbnail.pic_num,S=t.config.thumbnail.width,C=t.config.thumbnail.height,P=t.config.thumbnail.col,A=t.config.thumbnail.row,T=t.config.thumbnail.urls,m.style.width=S+"px",m.style.height=C+"px")};t.on("loadedmetadata",j),"function"==typeof t.config.disableSwipeHandler&&"function"==typeof t.config.enableSwipeHandler&&(t.root.addEventListener("touchmove",e=>{e.preventDefault(),t.disableSwipe||(t.disableSwipe=!0,t.config.disableSwipeHandler.call(t))}),t.root.addEventListener("touchstart",e=>{t.disableSwipe=!0,t.config.disableSwipeHandler.call(t)}),t.root.addEventListener("touchend",e=>{t.disableSwipe=!1,t.config.enableSwipeHandler.call(t)}));let O=["touchstart","mousedown"];"mobile"===f.device&&O.pop();let R=null,N=null,B=function(o){if(t.config.disableProgress)return;if(o.stopPropagation(),u(o),o._target===h||!t.config.allowSeekAfterEnded&&t.ended)return!0;r.focus();let{left:n}=p.getBoundingClientRect();const i=y(t);return i?(n=p.getBoundingClientRect().top,e=r.getBoundingClientRect().height):(e=r.getBoundingClientRect().width,n=p.getBoundingClientRect().left),R=function(r){r.stopPropagation(),u(r),t.isProgressMoving=!0;let o=(i?r.clientY:r.clientX)-n;o>e&&(o=e);let s=o/e*t.duration;if(s<0&&(s=0),t.config.allowSeekPlayed&&Number(s).toFixed(1)>t.maxPlayedTime);else if(p.style.width=100*o/e+"%","video"!==t.videoConfig.mediaType||t.dash||t.config.closeMoveSeek){let e=l(t.controls,".xgplayer-time");e&&(e.innerHTML=`<span class="xgplayer-time-current">${c(s||0)}</span><span>${c(t.duration)}</span>`)}else console.log("trigger touchmove"),t.currentTime=Number(s).toFixed(1);if(t.config.thumbnail&&t.config.thumbnail.isShowCoverPreview){k.innerHTML=`<span>${c(s)}</span> / ${c(t.duration||0)}`,M=t.duration/L;let e=Math.floor(s/M);m.style.backgroundImage=`url(${T[Math.ceil((e+1)/(P*A))-1]})`;let r=e+1-P*A*(Math.ceil((e+1)/(P*A))-1),o=Math.ceil(r/A)-1,n=r-o*A-1;m.style["background-position"]=`-${n*S}px -${o*C}px`,w.style.display="block"}t.emit("focus")},N=function(o){if(console.log("up event",o),o.stopPropagation(),u(o),window.removeEventListener("mousemove",R),window.removeEventListener("touchmove",R,{passive:!1}),window.removeEventListener("mouseup",N),window.removeEventListener("touchend",N),f.browser.indexOf("ie")<0&&r.blur(),!t.isProgressMoving||t.videoConfig&&"audio"===t.videoConfig.mediaType||t.dash||t.config.closeMoveSeek){let r=(i?o.clientY:o.clientX)-n;r>e&&(r=e);let s=r/e*t.duration;s<0&&(s=0),t.config.allowSeekPlayed&&Number(s).toFixed(1)>t.maxPlayedTime||(p.style.width=100*r/e+"%",console.warn("trigger touchup"),t.currentTime=Number(s).toFixed(1))}t.config.thumbnail&&t.config.thumbnail.isShowCoverPreview&&(w.style.display="none"),t.emit("focus"),t.isProgressMoving=!1},window.addEventListener("touchmove",R,{passive:!1}),window.addEventListener("touchend",N),window.addEventListener("mousemove",R),window.addEventListener("mouseup",N),!0};O.forEach(e=>{r.addEventListener(e,B)});const U=function(e){if(!t.config.allowSeekAfterEnded&&t.ended)return!0;const o=y(t);let i=o?r.getBoundingClientRect().top:r.getBoundingClientRect().left,s=o?r.getBoundingClientRect().height:r.getBoundingClientRect().width,a=function(e){let a=((o?e.clientY:e.clientX)-i)/s*t.duration;a=a<0?0:a,h.textContent=c(a);let l=h.getBoundingClientRect().width;if(t.config.thumbnail&&!t.config.thumbnail.isShowCoverPreview){M=t.duration/L;let r=Math.floor(a/M);m.style.backgroundImage=`url(${T[Math.ceil((r+1)/(P*A))-1]})`;let n=r+1-P*A*(Math.ceil((r+1)/(P*A))-1),p=Math.ceil(n/A)-1,c=n-p*A-1;m.style["background-position"]=`-${c*S}px -${p*C}px`;let u=(o?e.clientY:e.clientX)-i-S/2;u=u>0?u:0,u=u<s-S?u:s-S,m.style.left=u+"px",m.style.top=-10-C+"px",m.style.display="block",h.style.left=u+S/2-l/2+"px"}else{let t=e.clientX-i-l/2;t=t>0?t:0,t=t>s-l?s-l:t,h.style.left=t+"px"}n(r,"xgplayer-progress-dot-active")?h.style.display="none":h.style.display="block"},l=function(e){a(e)},p=function(e){r.removeEventListener("mousemove",l,!1),r.removeEventListener("mouseleave",p,!1),a(e),h.style.display="none",t.config.thumbnail&&!t.config.thumbnail.isShowCoverPreview&&(m.style.display="none")};r.addEventListener("mousemove",l,!1),r.addEventListener("mouseleave",p,!1),a(e)};r.addEventListener("mouseenter",U,!1);let $=function(){if(void 0===t.maxPlayedTime&&(t.maxPlayedTime=0),t.maxPlayedTime<t.currentTime&&(t.maxPlayedTime=t.currentTime),!e&&r&&(e=r.getBoundingClientRect().width),!t.isProgressMoving&&!t.isSeeking&&!t.seeking){const e=t.currentTime/t.duration,o=Number(p.style.width.replace("%","")||"0")/Number(r.style.width||"100");Math.abs(e-o)<=1&&(p.style.width=100*t.currentTime/t.duration+"%")}};t.on("timeupdate",$);let I=function(e){p.style.width=100*e/t.duration+"%"};t.on("currentTimeChange",I);let X=function(){p.style.width="0%"};t.on("srcChange",X);let q=function(){let e=t.buffered;if(e&&e.length>0){let r=e.end(e.length-1);for(let o=0,n=e.length;o<n;o++)if(t.currentTime>=e.start(o)&&t.currentTime<=e.end(o)){r=e.end(o);for(let t=o+1;t<e.length;t++)if(e.start(t)-e.end(t-1)>=2){r=e.end(t-1);break}break}x.style.width=r/t.duration*100+"%"}};const D=["bufferedChange","cacheupdate","ended","timeupdate"];D.forEach(e=>{t.on(e,q)}),t.once("destroy",(function e(){t.removeAllProgressDot(),t.off("canplay",b),t.off("timeupdate",$),t.off("currentTimeChange",I),t.off("srcChange",X),t.off("loadedmetadata",j),r.removeEventListener("mouseenter",U,!1),O.forEach(e=>{r.removeEventListener(e,B)}),window.removeEventListener("mousemove",R),window.removeEventListener("touchmove",R,{passive:!1}),window.removeEventListener("mouseup",N),window.removeEventListener("touchend",N),D.forEach(e=>{t.off(e,q)}),t.off("destroy",e)}))}};t.default={name:"progress",method:function(){x.method.call(this)}}}])}));